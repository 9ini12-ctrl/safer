<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ููุตุฉ ุฅุฏุงุฑุฉ ุงูุณูุฑุงุก</title>
  <meta name="description" content="ููุตุฉ ุฎูููุฉ ูุฅุฏุงุฑุฉ ุงูุณูุฑุงุก: ุฑูุน CSVุ ุงุญุชุณุงุจ ุงูุชุญุตูู ุนุจุฑ ููุฏ ุงูุฅุญุงูุฉุ ุงุญุชุณุงุจ ุงูุตูุงุฏูู ุงูููุชูุญุฉุ ุฃูุฏุงู ููููุฉุ ูุฑุณุงูุฉ ูุดุฑ ูุฑูุฒูุฉ." />
  <link rel="icon" href="assets/logo.svg" />
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <div class="bg">
    <img class="bg-pattern" src="assets/pattern.svg" alt="" aria-hidden="true"/>
  </div>

  <header class="topbar">
    <div class="brand">
      <img src="assets/logo.svg" class="logo" alt="ุดุนุงุฑ" />
      <div class="brand-titles">
        <div class="brand-title">ููุตุฉ ุฅุฏุงุฑุฉ ุงูุณูุฑุงุก</div>
        <div class="brand-subtitle">ููุท ูุงุฏุฆ โข ูุงุถุญ โข ุนููู</div>
      </div>
    </div>
    <div class="top-actions">
      <button class="btn ghost" id="btnTheme" type="button" title="ุชุจุฏูู ุงููุธูุฑ">๐</button>
      <button class="btn ghost" id="btnAdmin" type="button" title="ููุญุฉ ุงูุฅุฏุงุฑุฉ">ููุญุฉ ุงูุฅุฏุงุฑุฉ</button>
    </div>
  </header>

  <main class="shell">
    <section class="card" id="viewLogin" aria-label="ุชุณุฌูู ุงูุฏุฎูู">
      <div class="card-head">
        <h1>ุฏุฎูู ุงูุณููุฑ</h1>
        <p class="muted">ุงุฏุฎู ุฑูู ุฌูุงูู ููุชุญ ุตูุญุชู.</p>
      </div>

      <div class="form-row">
        <label class="label" for="phoneInput">ุฑูู ุงูุฌูุงู</label>
        <input class="input" id="phoneInput" inputmode="tel" autocomplete="tel" placeholder="05xxxxxxxx" />
        <button class="btn primary" id="btnLogin" type="button">ุฏุฎูู</button>
      </div>

      <div class="hint">
        <span class="dot"></span>
        <span>ููุงุญุธุฉ: ูุฐู ูุณุฎุฉ ุซุงุจุชุฉ (Static) ููุงุณุจุฉ ููุชููุงู. ุจูุงูุงุช ุงูุฅุฏุงุฑุฉ ุชูุญูุธ ุฏุงุฎู ุงููุชุตูุญ (LocalStorage). ููุฑุจุท ุงููุฑูุฒู ุงูุญูููู ุจูู ุนุฏุฉ ุฃุฌูุฒุฉุ ุฃุถู ุชุฎุฒูู ุณุญุงุจู (Netlify Functions / Supabase).</span>
      </div>
    </section>

    <section class="card hidden" id="viewAmbassador" aria-label="ููุญุฉ ุงูุณููุฑ">
      <div class="card-head row">
        <div>
          <h2 id="ambName">โ</h2>
          <p class="muted" id="ambMeta">โ</p>
        </div>
        <div class="row gap-sm">
          <button class="btn" id="btnCopyLink" type="button">ูุณุฎ ุฑุงุจุท ุตูุญุชู</button>
          <button class="btn ghost" id="btnLogout" type="button">ุฎุฑูุฌ</button>
        </div>
      </div>

      <div class="grid grid-3">
        <div class="metric">
          <div class="metric-label">ุชุญุตูู ุงูููู</div>
          <div class="metric-value" id="mTodayAmount">โ</div>
          <div class="metric-sub" id="mTodayAmountSub">โ</div>
          <div class="progress">
            <div class="bar" id="pTodayAmount"></div>
          </div>
        </div>
        <div class="metric">
          <div class="metric-label">ุตูุงุฏูู ุงูููู</div>
          <div class="metric-value" id="mTodayBoxes">โ</div>
          <div class="metric-sub" id="mTodayBoxesSub">โ</div>
          <div class="progress">
            <div class="bar" id="pTodayBoxes"></div>
          </div>
        </div>
        <div class="metric">
          <div class="metric-label">ูุณุชูุงู ุงูููู</div>
          <div class="metric-value" id="mTodayBadge">โ</div>
          <div class="metric-sub">ุชูุฏูุฑ ุจุตุฑู ุจุณูุท ูุณุงุนุฏู ุชุนุฑู ุฃูู ูุตูุช</div>
        </div>
      </div>

      <div class="split">
        <div class="panel">
          <div class="panel-head">
            <h3>ุฅุฌูุงูู ุงูุชุญุตูู</h3>
            <p class="muted">ุญุณุจ ููุฏ ุงูุฅุญุงูุฉ ุงููุณุฌู ูู</p>
          </div>
          <div class="grid grid-2">
            <div class="kpi">
              <div class="kpi-label">ุฅุฌูุงูู ุงููุจูุบ</div>
              <div class="kpi-value" id="mAllAmount">โ</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">ุนุฏุฏ ุงูุนูููุงุช</div>
              <div class="kpi-value" id="mAllDonations">โ</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">ุฅุฌูุงูู ุงูุตูุงุฏูู</div>
              <div class="kpi-value" id="mAllBoxes">โ</div>
            </div>
            <div class="kpi">
              <div class="kpi-label">ุขุฎุฑ ุชุญุฏูุซ</div>
              <div class="kpi-value" id="mLastSync">โ</div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-head">
            <h3>ุฑุณุงูุฉ ุงููุดุฑ</h3>
            <p class="muted">ุงูุณุฎ ุงููุต ูุดุงุฑู ุงูุตูุฑุฉ ุจุณูููุฉ</p>
          </div>
          <div class="share">
            <img id="shareImg" class="share-img" alt="ุตูุฑุฉ ูููุดุฑ" />
            <textarea id="shareMsg" class="textarea" rows="7" readonly></textarea>
            <div class="row gap-sm">
              <button class="btn primary" id="btnCopyMsg" type="button">ูุณุฎ ุงูุฑุณุงูุฉ</button>
              <button class="btn" id="btnDownloadImg" type="button">ุชุญููู ุงูุตูุฑุฉ</button>
            </div>
          </div>
        </div>
      </div>

      <div class="card-foot muted">
        ุชูููุญ: ุฅุฐุง ูุงุฌูุช ูุดููุฉ ูู ูุชุญ ุงูุตูุญุฉุ ุชุฃูุฏ ุฃู ุฑูู ุฌูุงูู ูุณุฌู ูู ููู ุงูุณูุฑุงุก.
      </div>
    </section>

    <section class="card hidden" id="viewAdmin" aria-label="ููุญุฉ ุงูุฅุฏุงุฑุฉ">
      <div class="card-head row">
        <div>
          <h2>ููุญุฉ ุงูุฅุฏุงุฑุฉ</h2>
          <p class="muted">ุฑูุน ุงููููุงุชุ ุถุจุท ุงูุฃูุฏุงูุ ุชุฌููุฒ ุฑุณุงูุฉ ุงููุดุฑุ ูุงุณุชุนุฑุงุถ ุงููุชุงุฆุฌ.</p>
        </div>
        <div class="row gap-sm">
          <button class="btn ghost" id="btnBack" type="button">ุฑุฌูุน</button>
        </div>
      </div>

      <div class="admin-gate" id="adminGate">
        <div class="form-row">
          <label class="label" for="adminPass">ูููุฉ ูุฑูุฑ ุงูุฅุฏุงุฑุฉ</label>
          <input class="input" id="adminPass" type="password" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ" />
          <button class="btn primary" id="btnAdminEnter" type="button">ุฏุฎูู</button>
        </div>
        <div class="hint">
          <span class="dot"></span>
          <span>ุงูุงูุชุฑุงุถู: <b>admin123</b> โ ุบูุฑูุง ูู ุฏุงุฎู ุฅุนุฏุงุฏุงุช ุงูุฃูุฏุงู.</span>
        </div>
      </div>

      <div class="hidden" id="adminBody">
        <div class="grid grid-2">
          <div class="panel">
            <div class="panel-head">
              <h3>ุฑูุน ูููุงุช CSV</h3>
              <p class="muted">ุงุฑูุน ุงููููุงุช ุจุงูุญููู ุงููุฐููุฑุฉ (ุงูุนูุงููู ูู ุงูุตู ุงูุฃูู).</p>
            </div>

            <div class="uploader">
              <div class="u-row">
                <div class="u-title">ููู ุงูุณูุฑุงุก</div>
                <div class="u-sub">name, phone, referral_code</div>
                <input class="file" id="fileAmbassadors" type="file" accept=".csv,text/csv" />
              </div>

              <div class="u-row">
                <div class="u-title">ููู ุงูุชุจุฑุนุงุช</div>
                <div class="u-sub">amount, donor_phone, donation_date, referral_code</div>
                <input class="file" id="fileDonations" type="file" accept=".csv,text/csv" />
              </div>

              <div class="u-row">
                <div class="u-title">ููู ุงูุตูุงุฏูู</div>
                <div class="u-sub">phone, box_id, created_at</div>
                <input class="file" id="fileBoxes" type="file" accept=".csv,text/csv" />
              </div>

              <div class="row gap-sm">
                <button class="btn primary" id="btnSaveFiles" type="button">ุญูุธ ุงูุจูุงูุงุช</button>
                <button class="btn" id="btnLoadSamples" type="button">ุชุญููู ุจูุงูุงุช ุชุฌุฑูุจูุฉ</button>
                <button class="btn danger" id="btnReset" type="button">ูุณุญ ูู ุงูุจูุงูุงุช</button>
              </div>
              <div class="hint">
                <span class="dot"></span>
                <span id="syncStatus">โ</span>
              </div>
            </div>
          </div>

          <div class="panel">
            <div class="panel-head">
              <h3>ุฃูุฏุงู ุงูููู</h3>
              <p class="muted">ุชูุนูุณ ูุจุงุดุฑุฉ ูู ููุญุฉ ุงูุณููุฑ.</p>
            </div>

            <div class="grid grid-2">
              <div>
                <label class="label" for="goalBoxes">ูุฏู ุงูุตูุงุฏูู ุงูููู</label>
                <input class="input" id="goalBoxes" type="number" min="0" step="1" placeholder="ูุซุงู: 10" />
              </div>
              <div>
                <label class="label" for="goalAmount">ูุฏู ุงูุชุญุตูู ุงูููู (๏ทผ)</label>
                <input class="input" id="goalAmount" type="number" min="0" step="1" placeholder="ูุซุงู: 2000" />
              </div>
            </div>

            <div class="grid grid-2">
              <div>
                <label class="label" for="adminNewPass">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</label>
                <input class="input" id="adminNewPass" type="password" placeholder="ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ" />
              </div>
              <div class="row align-end">
                <button class="btn primary" id="btnSaveGoals" type="button">ุญูุธ ุงูุฃูุฏุงู</button>
              </div>
            </div>

            <div class="hint">
              <span class="dot"></span>
              <span>ูุชู ุงุญุชุณุงุจ "ุงูููู" ุญุณุจ ุชูููุช ุงูุฌูุงุฒ.</span>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-head">
            <h3>ุฑุณุงูุฉ ุงููุดุฑ ุงููุฑูุฒูุฉ</h3>
            <p class="muted">ูุต + ุตูุฑุฉุ ุชุธูุฑ ููู ุณููุฑ ูู ุตูุญุชู.</p>
          </div>
          <div class="grid grid-2">
            <div>
              <label class="label" for="adminShareMsg">ูุต ุงูุฑุณุงูุฉ</label>
              <textarea class="textarea" id="adminShareMsg" rows="8" placeholder="ุงูุชุจ ุฑุณุงูุฉ ูุดุฑ ุฌุงูุฒุฉ..."></textarea>
              <div class="row gap-sm">
                <button class="btn primary" id="btnSaveShare" type="button">ุญูุธ ุงูุฑุณุงูุฉ</button>
                <button class="btn" id="btnInsertTemplate" type="button">ุฅุฏุฑุงุฌ ูุงูุจ ุฐูู</button>
              </div>
              <div class="hint">
                <span class="dot"></span>
                <span>ููููู ุงุณุชุฎุฏุงู ุงููุชุบูุฑุงุช: <code>{name}</code> <code>{ref}</code> <code>{today_amount}</code> <code>{today_boxes}</code></span>
              </div>
            </div>

            <div>
              <label class="label" for="adminShareImg">ุตูุฑุฉ ุงููุดุฑ</label>
              <input class="file" id="adminShareImg" type="file" accept="image/*" />
              <div class="preview">
                <img id="adminShareImgPreview" alt="ูุนุงููุฉ ุงูุตูุฑุฉ" />
              </div>
              <div class="row gap-sm">
                <button class="btn primary" id="btnSaveShareImg" type="button">ุญูุธ ุงูุตูุฑุฉ</button>
                <button class="btn danger" id="btnClearShareImg" type="button">ุญุฐู ุงูุตูุฑุฉ</button>
              </div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-head row">
            <div>
              <h3>ููุญุฉ ุงููุชุงุจุนุฉ</h3>
              <p class="muted">ุชุฑุชูุจ ุงูุณูุฑุงุก ุญุณุจ ุชุญุตูู ุงูููู (ุซู ุงูุตูุงุฏูู).</p>
            </div>
            <div class="row gap-sm">
              <button class="btn" id="btnExportLeaderboard" type="button">ุชุตุฏูุฑ CSV</button>
            </div>
          </div>

          <div class="table-wrap">
            <table class="table" id="leaderboard">
              <thead>
                <tr>
                  <th>ุงูุณููุฑ</th>
                  <th>ุงูุฌูุงู</th>
                  <th>ููุฏ ุงูุฅุญุงูุฉ</th>
                  <th>ุชุญุตูู ุงูููู</th>
                  <th>ุตูุงุฏูู ุงูููู</th>
                  <th>ุฅุฌูุงูู ุงูุชุญุตูู</th>
                  <th>ุฅุฌูุงูู ุงูุตูุงุฏูู</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>

          <div class="hint">
            <span class="dot"></span>
            <span>ุชูุฏุฑ ุชุถูู ุฃุนูุฏุฉ ุฅุถุงููุฉ ูู CSVุ ุงูููุตุฉ ุชุชุฌุงูู ุฃู ุฃุนูุฏุฉ ุบูุฑ ูุนุฑููุฉ.</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer muted">
    <span>ยฉ ููุตุฉ ุฅุฏุงุฑุฉ ุงูุณูุฑุงุก โ ูุณุฎุฉ ุชุฌุฑูุจูุฉ ูุงุจูุฉ ููุชุทููุฑ.</span>
  </footer>

  <script src="assets/app.js"></script>
</body>
</html>
